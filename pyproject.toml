#Файл pyproject.toml — это сейчас «золотой стандарт» в Python для настройки проекта. Он пришел на смену куче разрозненных файлов конфигурации.
#Давайте разложим ваши пункты по полочкам, чтобы закрепить понимание:
#1. Упрощение импортов (pytest)
#Вы верно подметили: настройка pythonpath = ["src"] — это как GPS-навигатор для Python во время тестов.
#Без неё: Python часто «теряет» папку src, и вам приходится либо перемещать файлы, либо писать сложные пути в импортах.
#С ней: Вы просто пишете from calculator import add, и Pytest понимает: «Ага, загляну-ка я в src, там точно есть этот файл». Это делает код тестов чистым и профессиональным.
#2. Порядок в коде (ruff)
#Инструмент Ruff, который мы туда прописали, — это современный «комбайн» для чистоты кода.
#Он делает две важные вещи:
#Linting (Линтинг): Ищет ошибки, неиспользуемые переменные и плохие практики (секции E, F, W).
#Sorting (Сортировка): Секция I (isort) автоматически расставляет ваши import по алфавиту и группам.
#Вы упомянули PEP 8 — это библия стиля Python. Ruff следит, чтобы вы не отступали от этих заповедей (например, не делали слишком длинные строки).
#Что ещё умеет pyproject.toml? (На будущее)
#Помимо того, что мы уже настроили, этот файл может:
#Управлять зависимостями: В нем можно перечислить, какие библиотеки (как pytest или requests) нужны вашему проекту.
#Сборка пакета: Если вы захотите выложить свою библиотеку в интернет (на PyPI), вся информация об авторе и версии будет лежать именно здесь.
#Важное уточнение про комментарии
#В вашем коде pyproject.toml в самом начале стоит:
#r''' ... #Это официально говорит pytest ... '''
#Будьте осторожны: Формат TOML не поддерживает многострочные кавычки в стиле Python для комментариев. В TOML комментарием считается только всё, что идет после знака # на каждой строке.
#Этот файл должен располагаться в корне директории, в моем случае Project1
#Это официально говорит pytest: «Эй, все мои исходники лежат в папке src, ищи их там!». Тогда в тесте вы сможете писать просто:
#from cli_cnt_files import count_files — и это будет работать чисто и красиво.
#

# новый вариант кода
[tool.pytest.ini_options]
pythonpath = ["src"]

[tool.ruff]
line-length = 120
src = ["src", "tests"]

[tool.ruff.lint]
# Здесь теперь живут настройки проверок
select = ["E", "F", "W", "I"]

[tool.ruff.lint.per-file-ignores]
# Игнорируем длину строки в тестах и документации, если очень нужно
"tests/*" = ["E501"]
"src/ficha_copy.py" = ["E501"]
"src/parser2.py" = ["E501"]
